// ==UserScript==
// @name         wiggy
// @namespace    https://aethre.co/
// @version      2025-01-25
// @downloadURL  https://github.com/thrilliams/wiggy/raw/main/wiggy.user.js
// @updateURL    https://github.com/thrilliams/wiggy/raw/main/wiggy.user.js
// @supportURL   https://github.com/thrilliams/wiggy/issues
// @description  makes whenisgood slightly more bearable
// @author       june
// @match        https://whenisgood.net/*/results/*
// @match        http://whenisgood.net/*/results/*
// @icon         http://whenisgood.net/favicon.ico
// @grant        unsafeWindow
// ==/UserScript==
"use strict";(()=>{var Z,y,je,Mt,D,Oe,Ue,_e,Ve,he,ae,ue,Et,z={},Be=[],Ct=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,fe=Array.isArray;function F(t,e){for(var n in e)t[n]=e[n];return t}function pe(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function St(t,e,n){var r,s,o,c={};for(o in e)o=="key"?r=e[o]:o=="ref"?s=e[o]:c[o]=e[o];if(arguments.length>2&&(c.children=arguments.length>3?Z.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)c[o]===void 0&&(c[o]=t.defaultProps[o]);return J(t,c,r,s,null)}function J(t,e,n,r,s){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++je,__i:-1,__u:0};return s==null&&y.vnode!=null&&y.vnode(o),o}function B(t){return t.children}function X(t,e){this.props=t,this.context=e}function V(t,e){if(e==null)return t.__?V(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?V(t):null}function Ke(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ke(t)}}function Fe(t){(!t.__d&&(t.__d=!0)&&D.push(t)&&!q.__r++||Oe!==y.debounceRendering)&&((Oe=y.debounceRendering)||Ue)(q)}function q(){var t,e,n,r,s,o,c,l;for(D.sort(_e);t=D.shift();)t.__d&&(e=D.length,r=void 0,o=(s=(n=t).__v).__e,c=[],l=[],n.__P&&((r=F({},s)).__v=s.__v+1,y.vnode&&y.vnode(r),de(n.__P,r,s,n.__n,n.__P.namespaceURI,32&s.__u?[o]:null,c,o??V(s),!!(32&s.__u),l),r.__v=s.__v,r.__.__k[r.__i]=r,Ye(c,r,l),r.__e!=o&&Ke(r)),D.length>e&&D.sort(_e));q.__r=0}function ze(t,e,n,r,s,o,c,l,_,a,u){var i,h,f,d,b,v,g=r&&r.__k||Be,m=e.length;for(_=At(n,e,g,_,m),i=0;i<m;i++)(f=n.__k[i])!=null&&(h=f.__i===-1?z:g[f.__i]||z,f.__i=i,v=de(t,f,h,s,o,c,l,_,a,u),d=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&ge(h.ref,null,f),u.push(f.ref,f.__c||d,f)),b==null&&d!=null&&(b=d),4&f.__u||h.__k===f.__k?_=Ge(f,_,t):typeof f.type=="function"&&v!==void 0?_=v:d&&(_=d.nextSibling),f.__u&=-7);return n.__e=b,_}function At(t,e,n,r,s){var o,c,l,_,a,u=n.length,i=u,h=0;for(t.__k=new Array(s),o=0;o<s;o++)(c=e[o])!=null&&typeof c!="boolean"&&typeof c!="function"?(_=o+h,(c=t.__k[o]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?J(null,c,null,null,null):fe(c)?J(B,{children:c},null,null,null):c.constructor===void 0&&c.__b>0?J(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=t,c.__b=t.__b+1,l=null,(a=c.__i=It(c,n,_,i))!==-1&&(i--,(l=n[a])&&(l.__u|=2)),l==null||l.__v===null?(a==-1&&h--,typeof c.type!="function"&&(c.__u|=4)):a!=_&&(a==_-1?h--:a==_+1?h++:(a>_?h--:h++,c.__u|=4))):t.__k[o]=null;if(i)for(o=0;o<u;o++)(l=n[o])!=null&&!(2&l.__u)&&(l.__e==r&&(r=V(l)),Qe(l,l));return r}function Ge(t,e,n){var r,s;if(typeof t.type=="function"){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=Ge(r[s],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=V(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function It(t,e,n,r){var s,o,c=t.key,l=t.type,_=e[n];if(_===null||_&&c==_.key&&l===_.type&&!(2&_.__u))return n;if(r>(_!=null&&!(2&_.__u)?1:0))for(s=n-1,o=n+1;s>=0||o<e.length;){if(s>=0){if((_=e[s])&&!(2&_.__u)&&c==_.key&&l===_.type)return s;s--}if(o<e.length){if((_=e[o])&&!(2&_.__u)&&c==_.key&&l===_.type)return o;o++}}return-1}function De(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Ct.test(e)?n:n+"px"}function Q(t,e,n,r,s){var o;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||De(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||De(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Ve,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r?n.u=r.u:(n.u=he,t.addEventListener(e,o?ue:ae,o)):t.removeEventListener(e,o?ue:ae,o);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function We(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=he++;else if(e.t<n.u)return;return n(y.event?y.event(e):e)}}}function de(t,e,n,r,s,o,c,l,_,a){var u,i,h,f,d,b,v,g,m,C,S,j,$,M,A,L,U,E=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(_=!!(32&n.__u),o=[l=e.__e=n.__e]),(u=y.__b)&&u(e);e:if(typeof E=="function")try{if(g=e.props,m="prototype"in E&&E.prototype.render,C=(u=E.contextType)&&r[u.__c],S=u?C?C.props.value:u.__:r,n.__c?v=(i=e.__c=n.__c).__=i.__E:(m?e.__c=i=new E(g,S):(e.__c=i=new X(g,S),i.constructor=E,i.render=Tt),C&&C.sub(i),i.props=g,i.state||(i.state={}),i.context=S,i.__n=r,h=i.__d=!0,i.__h=[],i._sb=[]),m&&i.__s==null&&(i.__s=i.state),m&&E.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=F({},i.__s)),F(i.__s,E.getDerivedStateFromProps(g,i.__s))),f=i.props,d=i.state,i.__v=e,h)m&&E.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),m&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(m&&E.getDerivedStateFromProps==null&&g!==f&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(g,S),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(g,i.__s,S)===!1||e.__v==n.__v)){for(e.__v!=n.__v&&(i.props=g,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(T){T&&(T.__=e)}),j=0;j<i._sb.length;j++)i.__h.push(i._sb[j]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(g,i.__s,S),m&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(f,d,b)})}if(i.context=S,i.props=g,i.__P=t,i.__e=!1,$=y.__r,M=0,m){for(i.state=i.__s,i.__d=!1,$&&$(e),u=i.render(i.props,i.state,i.context),A=0;A<i._sb.length;A++)i.__h.push(i._sb[A]);i._sb=[]}else do i.__d=!1,$&&$(e),u=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++M<25);i.state=i.__s,i.getChildContext!=null&&(r=F(F({},r),i.getChildContext())),m&&!h&&i.getSnapshotBeforeUpdate!=null&&(b=i.getSnapshotBeforeUpdate(f,d)),l=ze(t,fe(L=u!=null&&u.type===B&&u.key==null?u.props.children:u)?L:[L],e,n,r,s,o,c,l,_,a),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),v&&(i.__E=i.__=null)}catch(T){if(e.__v=null,_||o!=null)if(T.then){for(e.__u|=_?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else for(U=o.length;U--;)pe(o[U]);else e.__e=n.__e,e.__k=n.__k;y.__e(T,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):l=e.__e=Lt(n.__e,e,n,r,s,o,c,_,a);return(u=y.diffed)&&u(e),128&e.__u?void 0:l}function Ye(t,e,n){for(var r=0;r<n.length;r++)ge(n[r],n[++r],n[++r]);y.__c&&y.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(o){o.call(s)})}catch(o){y.__e(o,s.__v)}})}function Lt(t,e,n,r,s,o,c,l,_){var a,u,i,h,f,d,b,v=n.props,g=e.props,m=e.type;if(m=="svg"?s="http://www.w3.org/2000/svg":m=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(a=0;a<o.length;a++)if((f=o[a])&&"setAttribute"in f==!!m&&(m?f.localName==m:f.nodeType==3)){t=f,o[a]=null;break}}if(t==null){if(m==null)return document.createTextNode(g);t=document.createElementNS(s,m,g.is&&g),l&&(y.__m&&y.__m(e,o),l=!1),o=null}if(m===null)v===g||l&&t.data===g||(t.data=g);else{if(o=o&&Z.call(t.childNodes),v=n.props||z,!l&&o!=null)for(v={},a=0;a<t.attributes.length;a++)v[(f=t.attributes[a]).name]=f.value;for(a in v)if(f=v[a],a!="children"){if(a=="dangerouslySetInnerHTML")i=f;else if(!(a in g)){if(a=="value"&&"defaultValue"in g||a=="checked"&&"defaultChecked"in g)continue;Q(t,a,null,f,s)}}for(a in g)f=g[a],a=="children"?h=f:a=="dangerouslySetInnerHTML"?u=f:a=="value"?d=f:a=="checked"?b=f:l&&typeof f!="function"||v[a]===f||Q(t,a,f,v[a],s);if(u)l||i&&(u.__html===i.__html||u.__html===t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(i&&(t.innerHTML=""),ze(t,fe(h)?h:[h],e,n,r,m=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,c,o?o[0]:n.__k&&V(n,0),l,_),o!=null)for(a=o.length;a--;)pe(o[a]);l||(a="value",m=="progress"&&d==null?t.removeAttribute("value"):d!==void 0&&(d!==t[a]||m=="progress"&&!d||m=="option"&&d!==v[a])&&Q(t,a,d,v[a],s),a="checked",b!==void 0&&b!==t[a]&&Q(t,a,b,v[a],s))}return t}function ge(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(s){y.__e(s,n)}}function Qe(t,e,n){var r,s;if(y.unmount&&y.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||ge(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){y.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&Qe(r[s],e,n||typeof t.type!="function");n||pe(t.__e),t.__c=t.__=t.__e=void 0}function Tt(t,e,n){return this.constructor(t,n)}function Je(t,e,n){var r,s,o,c;e==document&&(e=document.documentElement),y.__&&y.__(t,e),s=(r=typeof n=="function")?null:n&&n.__k||e.__k,o=[],c=[],de(e,t=(!r&&n||e).__k=St(B,null,[t]),s||z,z,e.namespaceURI,!r&&n?[n]:s?null:e.firstChild?Z.call(e.childNodes):null,o,!r&&n?n:s?s.__e:e.firstChild,r,c),Ye(o,t,c)}Z=Be.slice,y={__e:function(t,e,n,r){for(var s,o,c;e=e.__;)if((s=e.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(t)),c=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),c=s.__d),c)return s.__E=s}catch(l){t=l}throw t}},je=0,Mt=function(t){return t!=null&&t.constructor==null},X.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=F({},this.state),typeof t=="function"&&(t=t(F({},n),this.props)),t&&F(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Fe(this))},X.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Fe(this))},X.prototype.render=B,D=[],Ue=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,_e=function(t,e){return t.__v.__b-e.__v.__b},q.__r=0,Ve=/(PointerCapture)$|Capture$/i,he=0,ae=We(!1),ue=We(!0),Et=0;var ye,x,me,Xe,ve=0,ot=[],k=y,qe=k.__b,Ze=k.__r,et=k.diffed,tt=k.__c,nt=k.unmount,rt=k.__;function Rt(t,e){k.__h&&k.__h(x,t,ve||e),ve=0;var n=x.__H||(x.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function te(t){return ve=1,Nt(it,t)}function Nt(t,e,n){var r=Rt(ye++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):it(void 0,e),function(l){var _=r.__N?r.__N[0]:r.__[0],a=r.t(_,l);_!==a&&(r.__N=[a,r.__[1]],r.__c.setState({}))}],r.__c=x,!x.u)){var s=function(l,_,a){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(h){return!!h.__c});if(u.every(function(h){return!h.__N}))return!o||o.call(this,l,_,a);var i=r.__c.props!==l;return u.forEach(function(h){if(h.__N){var f=h.__[0];h.__=h.__N,h.__N=void 0,f!==h.__[0]&&(i=!0)}}),o&&o.call(this,l,_,a)||i};x.u=!0;var o=x.shouldComponentUpdate,c=x.componentWillUpdate;x.componentWillUpdate=function(l,_,a){if(this.__e){var u=o;o=void 0,s(l,_,a),o=u}c&&c.call(this,l,_,a)},x.shouldComponentUpdate=s}return r.__N||r.__}function Pt(){for(var t;t=ot.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ee),t.__H.__h.forEach(be),t.__H.__h=[]}catch(e){t.__H.__h=[],k.__e(e,t.__v)}}k.__b=function(t){x=null,qe&&qe(t)},k.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),rt&&rt(t,e)},k.__r=function(t){Ze&&Ze(t),ye=0;var e=(x=t.__c).__H;e&&(me===x?(e.__h=[],x.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(ee),e.__h.forEach(be),e.__h=[],ye=0)),me=x},k.diffed=function(t){et&&et(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(ot.push(e)!==1&&Xe===k.requestAnimationFrame||((Xe=k.requestAnimationFrame)||$t)(Pt)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),me=x=null},k.__c=function(t,e){e.some(function(n){try{n.__h.forEach(ee),n.__h=n.__h.filter(function(r){return!r.__||be(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],k.__e(r,n.__v)}}),tt&&tt(t,e)},k.unmount=function(t){nt&&nt(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ee(r)}catch(s){e=s}}),n.__H=void 0,e&&k.__e(e,n.__v))};var st=typeof requestAnimationFrame=="function";function $t(t){var e,n=function(){clearTimeout(r),st&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);st&&(e=requestAnimationFrame(n))}function ee(t){var e=x,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),x=e}function be(t){var e=x;t.__c=t.__(),x=e}function it(t,e){return typeof e=="function"?e(t):e}function ct(t){let e=t.querySelector(".cantCount"),n=e.querySelector("img");if(n!==null){let[s,o]=n.src.match(/dot(\d)\.gif$/);return parseInt(o)}let r=e.textContent;return parseInt(r)||0}function ne(){let t=[...document.querySelectorAll(".slot")],e=t.map(r=>ct(r)),n=Math.max(...e);for(let r in t){let s=t[r],o=e[r]/n||0,c=s.querySelector(".cantCount").style;c!==void 0&&(c.display="none"),o===0?s.style.backgroundColor="#dddd00":s.style.backgroundColor=`color-mix(in srgb, #ff0000 ${Math.floor(o*100)}%, #00ff00)`}}function lt(){unsafeWindow.paintCanDos(),ne()}function H(t){return Array.isArray?Array.isArray(t):gt(t)==="[object Array]"}var Ht=1/0;function Ot(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-Ht?"-0":e}function Ft(t){return t==null?"":Ot(t)}function N(t){return typeof t=="string"}function pt(t){return typeof t=="number"}function Dt(t){return t===!0||t===!1||Wt(t)&&gt(t)=="[object Boolean]"}function dt(t){return typeof t=="object"}function Wt(t){return dt(t)&&t!==null}function I(t){return t!=null}function xe(t){return!t.trim().length}function gt(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}var jt="Incorrect 'index' type",Ut=t=>`Invalid value for key ${t}`,Vt=t=>`Pattern length exceeds max of ${t}.`,Bt=t=>`Missing ${t} property in key`,Kt=t=>`Property 'weight' in key '${t}' must be a positive integer`,_t=Object.prototype.hasOwnProperty,ke=class{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let s=mt(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function mt(t){let e=null,n=null,r=null,s=1,o=null;if(N(t)||H(t))r=t,e=at(t),n=we(t);else{if(!_t.call(t,"name"))throw new Error(Bt("name"));let c=t.name;if(r=c,_t.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(Kt(c));e=at(c),n=we(c),o=t.getFn}return{path:e,id:n,weight:s,src:r,getFn:o}}function at(t){return H(t)?t:t.split(".")}function we(t){return H(t)?t.join("."):t}function zt(t,e){let n=[],r=!1,s=(o,c,l)=>{if(I(o))if(!c[l])n.push(o);else{let _=c[l],a=o[_];if(!I(a))return;if(l===c.length-1&&(N(a)||pt(a)||Dt(a)))n.push(Ft(a));else if(H(a)){r=!0;for(let u=0,i=a.length;u<i;u+=1)s(a[u],c,l+1)}else c.length&&s(a,c,l+1)}};return s(t,N(e)?e.split("."):e,0),r?n:n[0]}var Gt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Yt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Qt={location:0,threshold:.6,distance:100},Jt={useExtendedSearch:!1,getFn:zt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},p={...Yt,...Gt,...Qt,...Jt},Xt=/[^ ]+/g;function qt(t=1,e=3){let n=new Map,r=Math.pow(10,e);return{get(s){let o=s.match(Xt).length;if(n.has(o))return n.get(o);let c=1/Math.pow(o,.5*t),l=parseFloat(Math.round(c*r)/r);return n.set(o,l),l},clear(){n.clear()}}}var G=class{constructor({getFn:e=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){this.norm=qt(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,N(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){let n=this.size();N(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!I(e)||xe(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((s,o)=>{let c=s.getFn?s.getFn(e):this.getFn(e,s.path);if(I(c)){if(H(c)){let l=[],_=[{nestedArrIndex:-1,value:c}];for(;_.length;){let{nestedArrIndex:a,value:u}=_.pop();if(I(u))if(N(u)&&!xe(u)){let i={v:u,i:a,n:this.norm.get(u)};l.push(i)}else H(u)&&u.forEach((i,h)=>{_.push({nestedArrIndex:h,value:i})})}r.$[o]=l}else if(N(c)&&!xe(c)){let l={v:c,n:this.norm.get(c)};r.$[o]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}};function yt(t,e,{getFn:n=p.getFn,fieldNormWeight:r=p.fieldNormWeight}={}){let s=new G({getFn:n,fieldNormWeight:r});return s.setKeys(t.map(mt)),s.setSources(e),s.create(),s}function Zt(t,{getFn:e=p.getFn,fieldNormWeight:n=p.fieldNormWeight}={}){let{keys:r,records:s}=t,o=new G({getFn:e,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(s),o}function re(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:s=p.distance,ignoreLocation:o=p.ignoreLocation}={}){let c=e/t.length;if(o)return c;let l=Math.abs(r-n);return s?c+l/s:l?1:c}function en(t=[],e=p.minMatchCharLength){let n=[],r=-1,s=-1,o=0;for(let c=t.length;o<c;o+=1){let l=t[o];l&&r===-1?r=o:!l&&r!==-1&&(s=o-1,s-r+1>=e&&n.push([r,s]),r=-1)}return t[o-1]&&o-r>=e&&n.push([r,o-1]),n}var W=32;function tn(t,e,n,{location:r=p.location,distance:s=p.distance,threshold:o=p.threshold,findAllMatches:c=p.findAllMatches,minMatchCharLength:l=p.minMatchCharLength,includeMatches:_=p.includeMatches,ignoreLocation:a=p.ignoreLocation}={}){if(e.length>W)throw new Error(Vt(W));let u=e.length,i=t.length,h=Math.max(0,Math.min(r,i)),f=o,d=h,b=l>1||_,v=b?Array(i):[],g;for(;(g=t.indexOf(e,d))>-1;){let M=re(e,{currentLocation:g,expectedLocation:h,distance:s,ignoreLocation:a});if(f=Math.min(M,f),d=g+u,b){let A=0;for(;A<u;)v[g+A]=1,A+=1}}d=-1;let m=[],C=1,S=u+i,j=1<<u-1;for(let M=0;M<u;M+=1){let A=0,L=S;for(;A<L;)re(e,{errors:M,currentLocation:h+L,expectedLocation:h,distance:s,ignoreLocation:a})<=f?A=L:S=L,L=Math.floor((S-A)/2+A);S=L;let U=Math.max(1,h-L+1),E=c?i:Math.min(h+L,i)+u,T=Array(E+2);T[E+1]=(1<<M)-1;for(let R=E;R>=U;R-=1){let Y=R-1,He=n[t.charAt(Y)];if(b&&(v[Y]=+!!He),T[R]=(T[R+1]<<1|1)&He,M&&(T[R]|=(m[R+1]|m[R])<<1|1|m[R+1]),T[R]&j&&(C=re(e,{errors:M,currentLocation:Y,expectedLocation:h,distance:s,ignoreLocation:a}),C<=f)){if(f=C,d=Y,d<=h)break;U=Math.max(1,2*h-d)}}if(re(e,{errors:M+1,currentLocation:h,expectedLocation:h,distance:s,ignoreLocation:a})>f)break;m=T}let $={isMatch:d>=0,score:Math.max(.001,C)};if(b){let M=en(v,l);M.length?_&&($.indices=M):$.isMatch=!1}return $}function nn(t){let e={};for(let n=0,r=t.length;n<r;n+=1){let s=t.charAt(n);e[s]=(e[s]||0)|1<<r-n-1}return e}var se=class{constructor(e,{location:n=p.location,threshold:r=p.threshold,distance:s=p.distance,includeMatches:o=p.includeMatches,findAllMatches:c=p.findAllMatches,minMatchCharLength:l=p.minMatchCharLength,isCaseSensitive:_=p.isCaseSensitive,ignoreLocation:a=p.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:o,findAllMatches:c,minMatchCharLength:l,isCaseSensitive:_,ignoreLocation:a},this.pattern=_?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;let u=(h,f)=>{this.chunks.push({pattern:h,alphabet:nn(h),startIndex:f})},i=this.pattern.length;if(i>W){let h=0,f=i%W,d=i-f;for(;h<d;)u(this.pattern.substr(h,W),h),h+=W;if(f){let b=i-W;u(this.pattern.substr(b),b)}}else u(this.pattern,0)}searchIn(e){let{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let d={isMatch:!0,score:0};return r&&(d.indices=[[0,e.length-1]]),d}let{location:s,distance:o,threshold:c,findAllMatches:l,minMatchCharLength:_,ignoreLocation:a}=this.options,u=[],i=0,h=!1;this.chunks.forEach(({pattern:d,alphabet:b,startIndex:v})=>{let{isMatch:g,score:m,indices:C}=tn(e,d,b,{location:s+v,distance:o,threshold:c,findAllMatches:l,minMatchCharLength:_,includeMatches:r,ignoreLocation:a});g&&(h=!0),i+=m,g&&C&&(u=[...u,...C])});let f={isMatch:h,score:h?i/this.chunks.length:1};return h&&r&&(f.indices=u),f}},P=class{constructor(e){this.pattern=e}static isMultiMatch(e){return ut(e,this.multiRegex)}static isSingleMatch(e){return ut(e,this.singleRegex)}search(){}};function ut(t,e){let n=t.match(e);return n?n[1]:null}var Me=class extends P{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}},Ee=class extends P{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},Ce=class extends P{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}},Se=class extends P{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}},Ae=class extends P{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},Ie=class extends P{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}},oe=class extends P{constructor(e,{location:n=p.location,threshold:r=p.threshold,distance:s=p.distance,includeMatches:o=p.includeMatches,findAllMatches:c=p.findAllMatches,minMatchCharLength:l=p.minMatchCharLength,isCaseSensitive:_=p.isCaseSensitive,ignoreLocation:a=p.ignoreLocation}={}){super(e),this._bitapSearch=new se(e,{location:n,threshold:r,distance:s,includeMatches:o,findAllMatches:c,minMatchCharLength:l,isCaseSensitive:_,ignoreLocation:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}},ie=class extends P{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r,s=[],o=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+o,s.push([r,n-1]);let c=!!s.length;return{isMatch:c,score:c?0:1,indices:s}}},Le=[Me,ie,Ce,Se,Ie,Ae,Ee,oe],ht=Le.length,rn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,sn="|";function on(t,e={}){return t.split(sn).map(n=>{let r=n.trim().split(rn).filter(o=>o&&!!o.trim()),s=[];for(let o=0,c=r.length;o<c;o+=1){let l=r[o],_=!1,a=-1;for(;!_&&++a<ht;){let u=Le[a],i=u.isMultiMatch(l);i&&(s.push(new u(i,e)),_=!0)}if(!_)for(a=-1;++a<ht;){let u=Le[a],i=u.isSingleMatch(l);if(i){s.push(new u(i,e));break}}}return s})}var cn=new Set([oe.type,ie.type]),Te=class{constructor(e,{isCaseSensitive:n=p.isCaseSensitive,includeMatches:r=p.includeMatches,minMatchCharLength:s=p.minMatchCharLength,ignoreLocation:o=p.ignoreLocation,findAllMatches:c=p.findAllMatches,location:l=p.location,threshold:_=p.threshold,distance:a=p.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:c,ignoreLocation:o,location:l,threshold:_,distance:a},this.pattern=n?e:e.toLowerCase(),this.query=on(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){let n=this.query;if(!n)return{isMatch:!1,score:1};let{includeMatches:r,isCaseSensitive:s}=this.options;e=s?e:e.toLowerCase();let o=0,c=[],l=0;for(let _=0,a=n.length;_<a;_+=1){let u=n[_];c.length=0,o=0;for(let i=0,h=u.length;i<h;i+=1){let f=u[i],{isMatch:d,indices:b,score:v}=f.search(e);if(d){if(o+=1,l+=v,r){let g=f.constructor.type;cn.has(g)?c=[...c,...b]:c.push(b)}}else{l=0,o=0,c.length=0;break}}if(o){let i={isMatch:!0,score:l/o};return r&&(i.indices=c),i}}return{isMatch:!1,score:1}}},Re=[];function ln(...t){Re.push(...t)}function Ne(t,e){for(let n=0,r=Re.length;n<r;n+=1){let s=Re[n];if(s.condition(t,e))return new s(t,e)}return new se(t,e)}var ce={AND:"$and",OR:"$or"},Pe={PATH:"$path",PATTERN:"$val"},$e=t=>!!(t[ce.AND]||t[ce.OR]),_n=t=>!!t[Pe.PATH],an=t=>!H(t)&&dt(t)&&!$e(t),ft=t=>({[ce.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function vt(t,e,{auto:n=!0}={}){let r=s=>{let o=Object.keys(s),c=_n(s);if(!c&&o.length>1&&!$e(s))return r(ft(s));if(an(s)){let _=c?s[Pe.PATH]:o[0],a=c?s[Pe.PATTERN]:s[_];if(!N(a))throw new Error(Ut(_));let u={keyId:we(_),pattern:a};return n&&(u.searcher=Ne(a,e)),u}let l={children:[],operator:o[0]};return o.forEach(_=>{let a=s[_];H(a)&&a.forEach(u=>{l.children.push(r(u))})}),l};return $e(t)||(t=ft(t)),r(t)}function un(t,{ignoreFieldNorm:e=p.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:o,score:c})=>{let l=s?s.weight:null;r*=Math.pow(c===0&&l?Number.EPSILON:c,(l||1)*(e?1:o))}),n.score=r})}function hn(t,e){let n=t.matches;e.matches=[],I(n)&&n.forEach(r=>{if(!I(r.indices)||!r.indices.length)return;let{indices:s,value:o}=r,c={indices:s,value:o};r.key&&(c.key=r.key.src),r.idx>-1&&(c.refIndex=r.idx),e.matches.push(c)})}function fn(t,e){e.score=t.score}function pn(t,e,{includeMatches:n=p.includeMatches,includeScore:r=p.includeScore}={}){let s=[];return n&&s.push(hn),r&&s.push(fn),t.map(o=>{let{idx:c}=o,l={item:e[c],refIndex:c};return s.length&&s.forEach(_=>{_(o,l)}),l})}var O=class{constructor(e,n={},r){this.options={...p,...n},this.options.useExtendedSearch,this._keyStore=new ke(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof G))throw new Error(jt);this._myIndex=n||yt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){I(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let n=[];for(let r=0,s=this._docs.length;r<s;r+=1){let o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,s-=1,n.push(o))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){let{includeMatches:r,includeScore:s,shouldSort:o,sortFn:c,ignoreFieldNorm:l}=this.options,_=N(e)?N(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return un(_,{ignoreFieldNorm:l}),o&&_.sort(c),pt(n)&&n>-1&&(_=_.slice(0,n)),pn(_,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(e){let n=Ne(e,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:o,i:c,n:l})=>{if(!I(o))return;let{isMatch:_,score:a,indices:u}=n.searchIn(o);_&&s.push({item:o,idx:c,matches:[{score:a,value:o,norm:l,indices:u}]})}),s}_searchLogical(e){let n=vt(e,this.options),r=(l,_,a)=>{if(!l.children){let{keyId:i,searcher:h}=l,f=this._findMatches({key:this._keyStore.get(i),value:this._myIndex.getValueForItemAtKeyId(_,i),searcher:h});return f&&f.length?[{idx:a,item:_,matches:f}]:[]}let u=[];for(let i=0,h=l.children.length;i<h;i+=1){let f=l.children[i],d=r(f,_,a);if(d.length)u.push(...d);else if(l.operator===ce.AND)return[]}return u},s=this._myIndex.records,o={},c=[];return s.forEach(({$:l,i:_})=>{if(I(l)){let a=r(n,l,_);a.length&&(o[_]||(o[_]={idx:_,item:l,matches:[]},c.push(o[_])),a.forEach(({matches:u})=>{o[_].matches.push(...u)}))}}),c}_searchObjectList(e){let n=Ne(e,this.options),{keys:r,records:s}=this._myIndex,o=[];return s.forEach(({$:c,i:l})=>{if(!I(c))return;let _=[];r.forEach((a,u)=>{_.push(...this._findMatches({key:a,value:c[u],searcher:n}))}),_.length&&o.push({idx:l,item:c,matches:_})}),o}_findMatches({key:e,value:n,searcher:r}){if(!I(n))return[];let s=[];if(H(n))n.forEach(({v:o,i:c,n:l})=>{if(!I(o))return;let{isMatch:_,score:a,indices:u}=r.searchIn(o);_&&s.push({score:a,key:e,value:o,idx:c,norm:l,indices:u})});else{let{v:o,n:c}=n,{isMatch:l,score:_,indices:a}=r.searchIn(o);l&&s.push({score:_,key:e,value:o,norm:c,indices:a})}return s}};O.version="7.0.0";O.createIndex=yt;O.parseIndex=Zt;O.config=p;O.parseQuery=vt;ln(Te);var K=new Map(Object.keys(unsafeWindow.respondents).map(t=>[t.slice(1),unsafeWindow.respondents[t]])),le=[...K.keys()],bt=new O(Object.keys(unsafeWindow.respondents).map(t=>unsafeWindow.respondents[t]),{keys:["name"],threshold:.2,includeScore:!0});var dn=0,Ln=Array.isArray;function w(t,e,n,r,s,o){e||(e={});var c,l,_=e;if("ref"in _)for(l in _={},e)l=="ref"?c=e[l]:_[l]=e[l];var a={type:t,props:_,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--dn,__i:-1,__u:0,__source:s,__self:o};if(typeof t=="function"&&(c=t.defaultProps))for(l in c)_[l]===void 0&&(_[l]=c[l]);return y.vnode&&y.vnode(a),a}function xt({id:t,included:e,setIncluded:n}){let r=K.get(t);return w("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[w("span",{id:t,style:{cursor:"pointer"},onClick:()=>{let s=document.createElement("div");s.id=t,unsafeWindow.clickRespondent(s)},children:r?.name}),w("input",{type:"checkbox",checked:e,onChange:s=>n(s.currentTarget.checked)})]})}function kt(){let[t,e]=te(le),n=u=>{for(let[i,h]of K.entries())h.included=u.includes(i);e(u),lt()},r=(u,i)=>{n(i?[...t,u]:t.filter(h=>h!==u))},[s,o]=te(""),[c,l]=te("fuse"),_=s.length>0?bt.search(s).map(u=>u.item):[...K.values()];return c==="name"&&_.sort((u,i)=>u.name.localeCompare(i.name)),c==="date"&&_.sort((u,i)=>new Date(u.updated).getTime()-new Date(i.updated).getTime()),w("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[w("button",{onClick:()=>{t.length>le.length/2?n([]):n([...le])},children:"toggle all"}),w("select",{onChange:u=>l(u.currentTarget.value),children:[w("option",{value:"name",selected:c==="name",children:"sort by name"}),w("option",{value:"date",selected:c==="date",children:"sort by date"}),w("option",{value:"fuse",selected:c==="fuse",children:"sort by relevance"})]}),w("input",{type:"text",placeholder:"search...",value:s,onInput:u=>o(u.currentTarget.value)}),w("hr",{style:{width:"100%",margin:"0"}}),_.map(({id:u})=>w(xt,{id:u,included:t.includes(u),setIncluded:i=>r(u,i)},u))]})}function wt(){let t=document.querySelector(".respondents");for(let r of document.querySelectorAll(".respondents > :not(.respondentPopup)"))r.remove();let e=document.createElement("div");e.style.marginLeft="10px",t.after(e);for(let r of document.querySelectorAll(".slot"))r.style.minWidth="90px";let n=unsafeWindow.outTd;return unsafeWindow.outTd=()=>{n();for(let r of Object.keys(unsafeWindow.respondents))document.getElementById(r.slice(1)).className=""},unsafeWindow.paintRespondents=()=>{},e}var gn=wt();Je(w(kt,{}),gn);ne();})();
